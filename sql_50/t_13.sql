# 按平均成绩从高到低显示所有学生的所有课程的成绩以及平均成绩

select *
from SC left join (
    select sid,avg(score) avg
    from SC
    group by sid) t using (sid)
order by avg desc,score desc;

# +------+------+-------+----------+
# | SId  | CId  | score | avg      |
# +------+------+-------+----------+
# | 07   | 03   |  98.0 | 93.50000 |
# | 07   | 02   |  89.0 | 93.50000 |
# | 01   | 03   |  99.0 | 89.66667 |
# | 01   | 02   |  90.0 | 89.66667 |
# | 01   | 01   |  80.0 | 89.66667 |
# | 05   | 02   |  87.0 | 81.50000 |
# | 05   | 01   |  76.0 | 81.50000 |
# | 03   | 01   |  80.0 | 80.00000 |
# | 03   | 02   |  80.0 | 80.00000 |
# | 03   | 03   |  80.0 | 80.00000 |
# | 02   | 03   |  80.0 | 70.00000 |
# | 02   | 01   |  70.0 | 70.00000 |
# | 02   | 02   |  60.0 | 70.00000 |
# | 04   | 01   |  50.0 | 33.33333 |
# | 04   | 02   |  30.0 | 33.33333 |
# | 04   | 03   |  20.0 | 33.33333 |
# | 06   | 03   |  34.0 | 32.50000 |
# | 06   | 01   |  31.0 | 32.50000 |
# +------+------+-------+----------+
